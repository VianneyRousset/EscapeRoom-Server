// Generated by CoffeeScript 2.3.2
(function() {
  var updates;

  updates = [
    {
      "nodes": {
        "f": {
          "conditions": {
            "2": {
              "state": "done"
            }
          }
        }
      }
    },
    {
      "nodes": {
        "h": {
          "conditions": {
            "3": {
              "state": "done"
            }
          }
        }
      }
    },
    {
      "nodes": {
        "f": {
          "conditions": {
            "3": {
              "state": "done"
            }
          },
          "state": "done"
        },
        "i": {
          "state": "active"
        }
      }
    },
    {
      "nodes": {
        "e": {
          "conditions": {
            "2": {
              "state": "done"
            }
          },
          "state": "done"
        }
      }
    },
    {},
    {
      "nodes": {
        "i": {
          "conditions": {
            "2": {
              "state": "done"
            }
          }
        }
      }
    },
    {
      "nodes": {
        "h": {
          "conditions": {
            "2": {
              "state": "done"
            }
          },
          "state": "done"
        },
        "j": {
          "state": "active"
        }
      }
    }
  ];

  define(function() {
    var Communication;
    return Communication = class Communication {
      constructor(app) {
        this.app = app;
      }

      //device_events = new EventSource "/b3/devices"
      //device_events.onmessage = (e) => @app.devices.update(e.data)
      listen() {
        this.app.devices_list.set({
          'Alice': {},
          'Bob': {},
          'Catherine': {}
        });
        this.app.server_log.add(['Problem', 'Everything is fine']);
        return this.app.clues.set_propositions(['N\'éteigez pas la lumière', 'La baguette chambre pour croissant', 'Pour un poulet le coq ne se réveil pas le matin', 'L\'astuce est de pointer la lune', 'Ne repeigner pas l\'ours si son pneu est usé', 'Chat imbriqué jamais refermé']);
      }

      get_init_tree() {
        return new Promise((resolve, reject) => {
          return setTimeout(() => {
            return resolve(this.tmp_init_tree());
          }, 2000);
        });
      }

      tmp_init_tree() {
        return JSON.parse('{\n  "nodes": {\n\n    "a": {\n      "i": 0, "j": 1, "title": "Node A", "state": "done",\n      "description": "Voici le contenu du noeud dont l\'identifiant est a",\n      "color_index": 0, "tracks": [\n        {"child": "b", "color_index": 0, "djs": []}\n      ],\n      "conditions": {\n        "1": {\n          "title": "Condition 1",\n          "description": "C\'est la condition un",\n          "state": "done" \n        },\n        "2": {\n          "title": "Condition 2",\n          "description": "C\'est la condition deux",\n          "state": "done" \n        },\n        "3": {\n          "title": "Condition 3",\n          "description": "C\'est la condition trois",\n          "state": "done" \n        }\n      }\n    },\n\n    "b": {\n      "i": 1, "j": 1, "title": "Node B", "state": "done",\n      "description": "Voici le contenu du noeud dont l\'identifiant est b",\n      "color_index": 0, "tracks": [\n        {"child": "c", "color_index": 0, "djs": []}\n      ],\n      "conditions": {\n        "1": {\n          "title": "Condition 1",\n          "description": "C\'est la condition un",\n          "state": "done" \n        },\n        "2": {\n          "title": "Condition 2",\n          "description": "C\'est la condition deux",\n          "state": "done" \n        },\n        "3": {\n          "title": "Condition 3",\n          "description": "C\'est la condition trois",\n          "state": "done" \n        }\n      }\n    },\n\n    "c": {\n      "i": 2, "j": 1, "title": "Node C", "state": "done",\n      "description": "Voici le contenu du noeud dont l\'identifiant est c",\n      "color_index": 0, "tracks": [\n        {"child": "d", "color_index": 0, "djs": []},\n        {"child": "e", "color_index": 1, "djs": []}\n      ],\n      "conditions": {\n        "1": {\n          "title": "Condition 1",\n          "description": "C\'est la condition un",\n          "state": "done" \n        },\n        "2": {\n          "title": "Condition 2",\n          "description": "C\'est la condition deux",\n          "state": "done" \n        },\n        "3": {\n          "title": "Condition 3",\n          "description": "C\'est la condition trois",\n          "state": "done" \n        }\n      }\n    },\n\n    "d": {\n      "i": 3, "j": 1, "title": "Node D", "state": "done",\n      "description": "Voici le contenu du noeud dont l\'identifiant est d",\n      "color_index": 0, "tracks": [\n        {"child": "f", "color_index": 1, "djs": []},\n        {"child": "g", "color_index": 0, "djs": []},\n        {"child": "h", "color_index": 2, "djs": []}\n      ],\n      "conditions": {\n        "1": {\n          "title": "Condition 1",\n          "description": "C\'est la condition un",\n          "state": "done" \n        },\n        "2": {\n          "title": "Condition 2",\n          "description": "C\'est la condition deux",\n          "state": "done" \n        },\n        "3": {\n          "title": "Condition 3",\n          "description": "C\'est la condition trois",\n          "state": "done" \n        }\n      }\n    },\n\n    "e": {\n      "i": 3, "j": 2, "title": "Node E", "state": "active",\n      "description": "Voici le contenu du noeud dont l\'identifiant est e",\n      "color_index": 1, "tracks": [],\n      "conditions": {\n        "1": {\n          "title": "Condition 1",\n          "description": "C\'est la condition un",\n          "state": "done" \n        },\n        "2": {\n          "title": "Condition 2",\n          "description": "C\'est la condition deux",\n          "state": "active" \n        },\n        "3": {\n          "title": "Condition 3",\n          "description": "C\'est la condition trois",\n          "state": "done" \n        }\n      }\n    },\n\n    "f": {\n      "i": 4, "j": 0, "title": "Node F", "state": "active",\n      "description": "Voici le contenu du noeud dont l\'identifiant est f",\n      "color_index": 1, "tracks": [\n        {"child": "i", "color_index": 1, "djs": []}\n      ],\n      "conditions": {\n        "1": {\n          "title": "Condition 1",\n          "description": "C\'est la condition un",\n          "state": "done" \n        },\n        "2": {\n          "title": "Condition 2",\n          "description": "C\'est la condition deux",\n          "state": "active" \n        },\n        "3": {\n          "title": "Condition 3",\n          "description": "C\'est la condition trois",\n          "state": "inactive" \n        }\n      }\n    },\n\n    "g": {\n      "i": 4, "j": 1, "title": "Node G", "state": "active",\n      "description": "Voici le contenu du noeud dont l\'identifiant est g",\n      "color_index": 0, "tracks": [\n        {"child": "j", "color_index": 0, "djs": []},\n        {"child": "k", "color_index": 3, "djs": []}\n      ],\n      "conditions": {\n        "1": {\n          "title": "Condition 1",\n          "description": "C\'est la condition un",\n          "state": "done" \n        },\n        "2": {\n          "title": "Condition 2",\n          "description": "C\'est la condition deux",\n          "state": "done" \n        },\n        "3": {\n          "title": "Condition 3",\n          "description": "C\'est la condition trois",\n          "state": "inactive" \n        }\n      }\n    },\n\n    "h": {\n      "i": 4, "j": 2, "title": "Node H", "state": "active",\n      "description": "Voici le contenu du noeud dont l\'identifiant est h",\n      "color_index": 2, "tracks": [\n        {"child": "j", "color_index": 2, "djs": []}\n      ],\n      "conditions": {\n        "1": {\n          "title": "Condition 1",\n          "description": "C\'est la condition un",\n          "state": "done" \n        },\n        "2": {\n          "title": "Condition 2",\n          "description": "C\'est la condition deux",\n          "state": "active" \n        },\n        "3": {\n          "title": "Condition 3",\n          "description": "C\'est la condition trois",\n          "state": "inactive" \n        }\n      }\n    },\n\n    "i": {\n      "i": 5, "j": 0, "title": "Node I", "state": "inactive",\n      "description": "Voici le contenu du noeud dont l\'identifiant est i",\n      "color_index": 1, "tracks": [\n        {"child": "l", "color_index": 1, "djs": []},\n        {"child": "m", "color_index": 1, "djs": []}\n      ],\n      "conditions": {\n        "1": {\n          "title": "Condition 1",\n          "description": "C\'est la condition un",\n          "state": "done" \n        },\n        "2": {\n          "title": "Condition 2",\n          "description": "C\'est la condition deux",\n          "state": "active" \n        },\n        "3": {\n          "title": "Condition 3",\n          "description": "C\'est la condition trois",\n          "state": "inactive" \n        }\n      }\n    },\n\n    "j": {\n      "i": 5, "j": 1, "title": "Node J", "state": "inactive",\n      "description": "Voici le contenu du noeud dont l\'identifiant est j",\n      "color_index": 0, "tracks": [\n        {"child": "m", "color_index": 0, "djs": []}\n      ],\n      "conditions": {\n        "1": {\n          "title": "Condition 1",\n          "description": "C\'est la condition un",\n          "state": "done" \n        },\n        "2": {\n          "title": "Condition 2",\n          "description": "C\'est la condition deux",\n          "state": "active" \n        },\n        "3": {\n          "title": "Condition 3",\n          "description": "C\'est la condition trois",\n          "state": "inactive" \n        }\n      }\n    },\n\n    "k": {\n      "i": 5, "j": 2, "title": "Node K", "state": "inactive",\n      "description": "Voici le contenu du noeud dont l\'identifiant est k",\n      "color_index": 3, "tracks": [\n        {"child": "m", "color_index": 3, "djs": []}\n      ],\n      "conditions": {\n        "1": {\n          "title": "Condition 1",\n          "description": "C\'est la condition un",\n          "state": "done" \n        },\n        "2": {\n          "title": "Condition 2",\n          "description": "C\'est la condition deux",\n          "state": "active" \n        },\n        "3": {\n          "title": "Condition 3",\n          "description": "C\'est la condition trois",\n          "state": "inactive" \n        }\n      }\n    },\n\n    "l": {\n      "i": 6, "j": 0, "title": "Node L", "state": "inactive",\n      "description": "Voici le contenu du noeud dont l\'identifiant est l",\n      "color_index": 1, "tracks": [],\n      "conditions": {\n        "1": {\n          "title": "Condition 1",\n          "description": "C\'est la condition un",\n          "state": "done" \n        },\n        "2": {\n          "title": "Condition 2",\n          "description": "C\'est la condition deux",\n          "state": "active" \n        },\n        "3": {\n          "title": "Condition 3",\n          "description": "C\'est la condition trois",\n          "state": "inactive" \n        }\n      }\n    },\n\n    "m": {\n      "i": 6, "j": 1, "title": "Node M", "state": "inactive",\n      "description": "Voici le contenu du noeud dont l\'identifiant est m",\n      "color_index": 0, "tracks": [],\n      "conditions": {\n        "1": {\n          "title": "Condition 1",\n          "description": "C\'est la condition un",\n          "state": "done" \n        },\n        "2": {\n          "title": "Condition 2",\n          "description": "C\'est la condition deux",\n          "state": "active" \n        },\n        "3": {\n          "title": "Condition 3",\n          "description": "C\'est la condition trois",\n          "state": "inactive" \n        }\n      }\n    }\n  }\n}');
      }

    };
  });

}).call(this);
